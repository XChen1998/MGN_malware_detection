#!/usr/bin/python

import networkx as nx
import glob
import numpy as np
import json
import os
import re
G = nx.Graph()
elist = [(3, 17, 1),(6, 7, 256),(7, 6, 256),(7, 10, 256),(7, 107, 256),(8, 9, 256),(9, 8, 256),(9, 227, 256),(9, 229, 256),(10, 7, 256),(10, 11, 256),(11, 10, 256),(11, 136, 256),(11, 137, 256),(11, 153, 256),(11, 166, 256),(11, 323, 256),(11, 325, 256),(12, 13, 1),(13, 12, 1),(13, 14, 256),(14, 13, 256),(15, 16, 1),(16, 15, 1),(16, 17, 1),(17, 3, 1),(17, 16, 1),(17, 18, 256),(18, 17, 256),(18, 19, 1),(19, 18, 1),(20, 21, 1),(21, 20, 1),(21, 24, 1),(22, 23, 1),(23, 22, 1),(23, 24, 1),(24, 21, 1),(24, 23, 1),(24, 25, 256),(25, 24, 256),(25, 32, 256),(25, 34, 256),(26, 27, 1),(27, 26, 1),(27, 30, 1),(28, 29, 1),(29, 28, 1),(29, 30, 1),(30, 27, 1),(30, 29, 1),(30, 31, 256),(31, 30, 256),(31, 35, 256),(31, 37, 256),(32, 25, 256),(32, 33, 1),(33, 32, 1),(33, 34, 256),(34, 25, 256),(34, 33, 256),(34, 38, 256),(34, 42, 256),(34, 45, 256),(34, 52, 256),(34, 55, 256),(34, 62, 256),(34, 65, 256),(34, 69, 256),(35, 31, 256),(35, 36, 1),(36, 35, 1),(36, 37, 256),(37, 31, 256),(37, 36, 256),(37, 77, 256),(37, 81, 256),(37, 84, 256),(37, 91, 256),(37, 97, 256),(37, 100, 256),(38, 34, 256),(38, 39, 1),(39, 38, 1),(39, 40, 1),(40, 39, 1),(40, 41, 256),(41, 40, 256),(41, 51, 1),(42, 34, 256),(42, 43, 1),(43, 42, 1),(43, 44, 1),(44, 43, 1),(44, 48, 1),(45, 34, 256),(45, 46, 1),(46, 45, 1),(46, 47, 1),(47, 46, 1),(47, 48, 1),(48, 44, 1),(48, 47, 1),(48, 49, 1),(49, 48, 1),(49, 50, 256),(50, 49, 256),(50, 51, 1),(51, 41, 1),(51, 50, 1),(51, 61, 1),(52, 34, 256),(52, 53, 1),(53, 52, 1),(53, 54, 1),(54, 53, 1),(54, 58, 1),(55, 34, 256),(55, 56, 1),(56, 55, 1),(56, 57, 1),(57, 56, 1),(57, 58, 1),(58, 54, 1),(58, 57, 1),(58, 59, 1),(59, 58, 1),(59, 60, 256),(60, 59, 256),(60, 61, 1),(61, 51, 1),(61, 60, 1),(61, 75, 1),(62, 34, 256),(62, 63, 1),(63, 62, 1),(63, 64, 1),(64, 63, 1),(64, 68, 1),(65, 34, 256),(65, 66, 1),(66, 65, 1),(66, 67, 1),(67, 66, 1),(67, 68, 1),(68, 64, 1),(68, 67, 1),(68, 72, 1),(69, 34, 256),(69, 70, 1),(70, 69, 1),(70, 71, 1),(71, 70, 1),(71, 72, 1),(72, 68, 1),(72, 71, 1),(72, 73, 1),(73, 72, 1),(73, 74, 256),(74, 73, 256),(74, 75, 1),(75, 61, 1),(75, 74, 1),(75, 76, 256),(76, 75, 256),(76, 110, 256),(76, 118, 256),(76, 123, 256),(77, 37, 256),(77, 78, 1),(78, 77, 1),(78, 79, 1),(79, 78, 1),(79, 80, 256),(80, 79, 256),(80, 90, 1),(81, 37, 256),(81, 82, 1),(82, 81, 1),(82, 83, 1),(83, 82, 1),(83, 87, 1),(84, 37, 256),(84, 85, 1),(85, 84, 1),(85, 86, 1),(86, 85, 1),(86, 87, 1),(87, 83, 1),(87, 86, 1),(87, 88, 1),(88, 87, 1),(88, 89, 256),(89, 88, 256),(89, 90, 1),(90, 80, 1),(90, 89, 1),(90, 96, 1),(91, 37, 256),(91, 92, 1),(92, 91, 1),(92, 93, 1),(93, 92, 1),(93, 94, 1),(94, 93, 1),(94, 95, 256),(95, 94, 256),(95, 96, 1),(96, 90, 1),(96, 95, 1),(96, 106, 1),(97, 37, 256),(97, 98, 1),(98, 97, 1),(98, 99, 1),(99, 98, 1),(99, 103, 1),(100, 37, 256),(100, 101, 1),(101, 100, 1),(101, 102, 1),(102, 101, 1),(102, 103, 1),(103, 99, 1),(103, 102, 1),(103, 104, 1),(104, 103, 1),(104, 105, 256),(105, 104, 256),(105, 106, 1),(106, 96, 1),(106, 105, 1),(106, 107, 256),(107, 7, 256),(107, 106, 256),(107, 108, 256),(107, 120, 256),(107, 140, 256),(108, 107, 256),(108, 109, 1),(109, 108, 1),(109, 112, 1),(110, 76, 256),(110, 111, 1),(111, 110, 1),(111, 112, 1),(112, 109, 1),(112, 111, 1),(112, 113, 1),(113, 112, 1),(113, 117, 256),(114, 115, 1),(114, 117, 256),(115, 114, 1),(115, 116, 256),(116, 115, 256),(116, 132, 256),(116, 134, 256),(117, 113, 256),(117, 114, 256),(118, 76, 256),(118, 119, 1),(119, 118, 1),(119, 122, 1),(120, 107, 256),(120, 121, 1),(121, 120, 1),(121, 122, 1),(122, 119, 1),(122, 121, 1),(122, 123, 256),(123, 76, 256),(123, 122, 256),(123, 124, 256),(123, 126, 256),(123, 129, 256),(124, 123, 256),(124, 125, 1),(125, 124, 1),(125, 128, 1),(126, 123, 256),(126, 127, 1),(127, 126, 1),(127, 128, 1),(128, 125, 1),(128, 127, 1),(128, 129, 256),(129, 123, 256),(129, 128, 256),(129, 130, 256),(129, 157, 256),(129, 171, 256),(129, 252, 256),(129, 267, 256),(130, 129, 256),(130, 131, 1),(131, 130, 1),(131, 135, 256),(132, 116, 256),(132, 133, 1),(132, 135, 256),(133, 132, 1),(133, 134, 256),(134, 116, 256),(134, 133, 256),(135, 131, 256),(135, 132, 256),(136, 11, 256),(136, 139, 1),(137, 11, 256),(137, 138, 1),(138, 137, 1),(138, 139, 1),(139, 136, 1),(139, 138, 1),(139, 140, 256),(140, 107, 256),(140, 139, 256),(140, 141, 256),(140, 145, 256),(140, 148, 256),(141, 140, 256),(141, 143, 1),(142, 143, 1),(143, 141, 1),(143, 142, 1),(143, 144, 256),(144, 143, 256),(144, 149, 256),(144, 150, 256),(144, 161, 256),(145, 140, 256),(145, 147, 1),(146, 147, 1),(147, 145, 1),(147, 146, 1),(147, 148, 256),(148, 140, 256),(148, 147, 256),(148, 162, 256),(148, 163, 256),(148, 175, 256),(149, 144, 256),(149, 152, 1),(150, 144, 256),(150, 151, 1),(151, 150, 1),(151, 152, 1),(152, 149, 1),(152, 151, 1),(152, 154, 1),(153, 11, 256),(153, 154, 1),(154, 152, 1),(154, 153, 1),(154, 160, 1),(155, 156, 1),(156, 155, 1),(156, 158, 1),(157, 129, 256),(157, 158, 1),(158, 156, 1),(158, 157, 1),(158, 159, 256),(159, 158, 256),(159, 160, 1),(160, 154, 1),(160, 159, 1),(160, 161, 256),(161, 144, 256),(161, 160, 256),(161, 204, 256),(161, 209, 256),(161, 215, 256),(161, 221, 256),(161, 238, 256),(162, 148, 256),(162, 165, 1),(163, 148, 256),(163, 164, 1),(164, 163, 1),(164, 165, 1),(165, 162, 1),(165, 164, 1),(165, 167, 1),(166, 11, 256),(166, 167, 1),(167, 165, 1),(167, 166, 1),(167, 174, 1),(168, 169, 1),(169, 168, 1),(169, 170, 1),(170, 169, 1),(170, 172, 1),(171, 129, 256),(171, 172, 1),(172, 170, 1),(172, 171, 1),(172, 173, 256),(173, 172, 256),(173, 174, 1),(174, 167, 1),(174, 173, 1),(174, 175, 256),(175, 148, 256),(175, 174, 256),(175, 176, 256),(175, 178, 256),(175, 181, 256),(176, 175, 256),(176, 177, 1),(177, 176, 1),(177, 180, 1),(178, 175, 256),(178, 179, 1),(179, 178, 1),(179, 180, 1),(180, 177, 1),(180, 179, 1),(180, 181, 256),(181, 175, 256),(181, 180, 256),(181, 182, 256),(181, 186, 256),(181, 192, 256),(181, 198, 256),(181, 234, 256),(182, 181, 256),(182, 183, 1),(183, 182, 1),(183, 184, 1),(184, 183, 1),(184, 185, 256),(185, 184, 256),(185, 191, 1),(186, 181, 256),(186, 187, 1),(187, 186, 1),(187, 188, 1),(188, 187, 1),(188, 189, 1),(189, 188, 1),(189, 190, 256),(190, 189, 256),(190, 191, 1),(191, 185, 1),(191, 190, 1),(191, 197, 1),(192, 181, 256),(192, 193, 1),(193, 192, 1),(193, 194, 1),(194, 193, 1),(194, 195, 1),(195, 194, 1),(195, 196, 256),(196, 195, 256),(196, 197, 1),(197, 191, 1),(197, 196, 1),(197, 203, 1),(198, 181, 256),(198, 199, 1),(199, 198, 1),(199, 200, 1),(200, 199, 1),(200, 201, 1),(201, 200, 1),(201, 202, 256),(202, 201, 256),(202, 203, 1),(203, 197, 1),(203, 202, 1),(203, 208, 1),(204, 161, 256),(204, 205, 1),(205, 204, 1),(205, 206, 1),(206, 205, 1),(206, 207, 256),(207, 206, 256),(207, 208, 1),(208, 203, 1),(208, 207, 1),(208, 214, 1),(209, 161, 256),(209, 210, 1),(210, 209, 1),(210, 211, 1),(211, 210, 1),(211, 212, 1),(212, 211, 1),(212, 213, 256),(213, 212, 256),(213, 214, 1),(214, 208, 1),(214, 213, 1),(214, 220, 1),(215, 161, 256),(215, 216, 1),(216, 215, 1),(216, 217, 1),(217, 216, 1),(217, 218, 1),(218, 217, 1),(218, 219, 256),(219, 218, 256),(219, 220, 1),(220, 214, 1),(220, 219, 1),(220, 226, 1),(221, 161, 256),(221, 222, 1),(222, 221, 1),(222, 223, 1),(223, 222, 1),(223, 224, 1),(224, 223, 1),(224, 225, 256),(225, 224, 256),(225, 226, 1),(226, 220, 1),(226, 225, 1),(226, 228, 1),(227, 9, 256),(227, 228, 1),(228, 226, 1),(228, 227, 1),(228, 229, 256),(229, 9, 256),(229, 228, 256),(229, 230, 256),(229, 231, 256),(229, 247, 256),(229, 261, 256),(229, 331, 256),(229, 333, 256),(229, 342, 256),(230, 229, 256),(230, 233, 1),(231, 229, 256),(231, 232, 1),(232, 231, 1),(232, 233, 1),(233, 230, 1),(233, 232, 1),(233, 234, 256),(234, 181, 256),(234, 233, 256),(234, 235, 256),(234, 239, 256),(234, 242, 256),(235, 234, 256),(235, 237, 1),(236, 237, 1),(237, 235, 1),(237, 236, 1),(237, 238, 256),(238, 161, 256),(238, 237, 256),(238, 243, 256),(238, 244, 256),(238, 256, 256),(239, 234, 256),(239, 241, 1),(240, 241, 1),(241, 239, 1),(241, 240, 1),(241, 242, 256),(242, 234, 256),(242, 241, 256),(242, 257, 256),(242, 258, 256),(242, 271, 256),(243, 238, 256),(243, 246, 1),(244, 238, 256),(244, 245, 1),(245, 244, 1),(245, 246, 1),(246, 243, 1),(246, 245, 1),(246, 248, 1),(247, 229, 256),(247, 248, 1),(248, 246, 1),(248, 247, 1),(248, 255, 1),(249, 250, 1),(250, 249, 1),(250, 251, 1),(251, 250, 1),(251, 253, 1),(252, 129, 256),(252, 253, 1),(253, 251, 1),(253, 252, 1),(253, 254, 256),(254, 253, 256),(254, 255, 1),(255, 248, 1),(255, 254, 1),(255, 256, 256),(256, 238, 256),(256, 255, 256),(256, 300, 256),(256, 305, 256),(256, 311, 256),(256, 317, 256),(257, 242, 256),(257, 260, 1),(258, 242, 256),(258, 259, 1),(259, 258, 1),(259, 260, 1),(260, 257, 1),(260, 259, 1),(260, 262, 1),(261, 229, 256),(261, 262, 1),(262, 260, 1),(262, 261, 1),(262, 270, 1),(263, 264, 1),(264, 263, 1),(264, 265, 1),(265, 264, 1),(265, 266, 1),(266, 265, 1),(266, 268, 1),(267, 129, 256),(267, 268, 1),(268, 266, 1),(268, 267, 1),(268, 269, 256),(269, 268, 256),(269, 270, 1),(270, 262, 1),(270, 269, 1),(270, 271, 256),(271, 242, 256),(271, 270, 256),(271, 272, 256),(271, 274, 256),(271, 277, 256),(272, 271, 256),(272, 273, 1),(273, 272, 1),(273, 276, 1),(274, 271, 256),(274, 275, 1),(275, 274, 1),(275, 276, 1),(276, 273, 1),(276, 275, 1),(276, 277, 256),(277, 271, 256),(277, 276, 256),(277, 278, 256),(277, 282, 256),(277, 288, 256),(277, 294, 256),(277, 330, 256),(278, 277, 256),(278, 279, 1),(279, 278, 1),(279, 280, 1),(280, 279, 1),(280, 281, 256),(281, 280, 256),(281, 287, 1),(282, 277, 256),(282, 283, 1),(283, 282, 1),(283, 284, 1),(284, 283, 1),(284, 285, 1),(285, 284, 1),(285, 286, 256),(286, 285, 256),(286, 287, 1),(287, 281, 1),(287, 286, 1),(287, 293, 1),(288, 277, 256),(288, 289, 1),(289, 288, 1),(289, 290, 1),(290, 289, 1),(290, 291, 1),(291, 290, 1),(291, 292, 256),(292, 291, 256),(292, 293, 1),(293, 287, 1),(293, 292, 1),(293, 299, 1),(294, 277, 256),(294, 295, 1),(295, 294, 1),(295, 296, 1),(296, 295, 1),(296, 297, 1),(297, 296, 1),(297, 298, 256),(298, 297, 256),(298, 299, 1),(299, 293, 1),(299, 298, 1),(299, 304, 1),(300, 256, 256),(300, 301, 1),(301, 300, 1),(301, 302, 1),(302, 301, 1),(302, 303, 256),(303, 302, 256),(303, 304, 1),(304, 299, 1),(304, 303, 1),(304, 310, 1),(305, 256, 256),(305, 306, 1),(306, 305, 1),(306, 307, 1),(307, 306, 1),(307, 308, 1),(308, 307, 1),(308, 309, 256),(309, 308, 256),(309, 310, 1),(310, 304, 1),(310, 309, 1),(310, 316, 1),(311, 256, 256),(311, 312, 1),(312, 311, 1),(312, 313, 1),(313, 312, 1),(313, 314, 1),(314, 313, 1),(314, 315, 256),(315, 314, 256),(315, 316, 1),(316, 310, 1),(316, 315, 1),(316, 322, 1),(317, 256, 256),(317, 318, 1),(318, 317, 1),(318, 319, 1),(319, 318, 1),(319, 320, 1),(320, 319, 1),(320, 321, 256),(321, 320, 256),(321, 322, 1),(322, 316, 1),(322, 321, 1),(322, 324, 1),(323, 11, 256),(323, 324, 1),(324, 322, 1),(324, 323, 1),(324, 325, 256),(325, 11, 256),(325, 324, 256),(325, 329, 256),(325, 336, 256),(326, 327, 1),(327, 326, 1),(327, 328, 256),(328, 327, 256),(328, 430, 256),(328, 432, 256),(328, 436, 256),(329, 325, 256),(329, 330, 256),(330, 277, 256),(330, 329, 256),(330, 337, 256),(330, 339, 256),(330, 354, 256),(331, 229, 256),(331, 332, 1),(332, 331, 1),(332, 335, 1),(333, 229, 256),(333, 334, 1),(334, 333, 1),(334, 335, 1),(335, 332, 1),(335, 334, 1),(335, 336, 256),(336, 325, 256),(336, 335, 256),(336, 346, 256),(336, 348, 256),(337, 330, 256),(337, 338, 1),(338, 337, 1),(338, 341, 1),(339, 330, 256),(339, 340, 1),(340, 339, 1),(340, 341, 1),(341, 338, 1),(341, 340, 1),(341, 342, 256),(342, 229, 256),(342, 341, 256),(342, 343, 256),(342, 345, 256),(343, 342, 256),(343, 344, 1),(344, 343, 1),(344, 345, 256),(345, 342, 256),(345, 344, 256),(345, 351, 256),(345, 356, 256),(345, 358, 256),(346, 336, 256),(346, 347, 1),(347, 346, 1),(347, 348, 256),(348, 336, 256),(348, 347, 256),(348, 349, 256),(348, 361, 256),(348, 363, 256),(349, 348, 256),(349, 350, 1),(350, 349, 1),(350, 352, 1),(351, 345, 256),(351, 352, 1),(352, 350, 1),(352, 351, 1),(352, 353, 1),(353, 352, 1),(353, 354, 256),(354, 330, 256),(354, 353, 256),(354, 355, 256),(354, 359, 256),(354, 369, 256),(355, 354, 256),(355, 357, 1),(356, 345, 256),(356, 357, 1),(357, 355, 1),(357, 356, 1),(357, 358, 256),(358, 345, 256),(358, 357, 256),(358, 364, 256),(358, 376, 256),(358, 378, 256),(359, 354, 256),(359, 360, 1),(360, 359, 1),(360, 362, 1),(361, 348, 256),(361, 362, 1),(362, 360, 1),(362, 361, 1),(362, 363, 256),(363, 348, 256),(363, 362, 256),(363, 366, 256),(363, 371, 256),(363, 373, 256),(364, 358, 256),(364, 365, 1),(365, 364, 1),(365, 367, 1),(366, 363, 256),(366, 367, 1),(367, 365, 1),(367, 366, 1),(367, 368, 1),(368, 367, 1),(368, 369, 256),(369, 354, 256),(369, 368, 256),(369, 370, 256),(369, 374, 256),(369, 384, 256),(370, 369, 256),(370, 372, 1),(371, 363, 256),(371, 372, 1),(372, 370, 1),(372, 371, 1),(372, 373, 256),(373, 363, 256),(373, 372, 256),(373, 379, 256),(373, 391, 256),(373, 393, 256),(374, 369, 256),(374, 375, 1),(375, 374, 1),(375, 377, 1),(376, 358, 256),(376, 377, 1),(377, 375, 1),(377, 376, 1),(377, 378, 256),(378, 358, 256),(378, 377, 256),(378, 381, 256),(378, 386, 256),(378, 388, 256),(379, 373, 256),(379, 380, 1),(380, 379, 1),(380, 382, 1),(381, 378, 256),(381, 382, 1),(382, 380, 1),(382, 381, 1),(382, 383, 1),(383, 382, 1),(383, 384, 256),(384, 369, 256),(384, 383, 256),(384, 385, 256),(384, 389, 256),(384, 399, 256),(385, 384, 256),(385, 387, 1),(386, 378, 256),(386, 387, 1),(387, 385, 1),(387, 386, 1),(387, 388, 256),(388, 378, 256),(388, 387, 256),(388, 394, 256),(388, 406, 256),(388, 408, 256),(389, 384, 256),(389, 390, 1),(390, 389, 1),(390, 392, 1),(391, 373, 256),(391, 392, 1),(392, 390, 1),(392, 391, 1),(392, 393, 256),(393, 373, 256),(393, 392, 256),(393, 396, 256),(393, 401, 256),(393, 403, 256),(394, 388, 256),(394, 395, 1),(395, 394, 1),(395, 397, 1),(396, 393, 256),(396, 397, 1),(397, 395, 1),(397, 396, 1),(397, 398, 1),(398, 397, 1),(398, 399, 256),(399, 384, 256),(399, 398, 256),(399, 400, 256),(399, 404, 256),(399, 414, 256),(400, 399, 256),(400, 402, 1),(401, 393, 256),(401, 402, 1),(402, 400, 1),(402, 401, 1),(402, 403, 256),(403, 393, 256),(403, 402, 256),(403, 409, 256),(403, 421, 256),(403, 423, 256),(404, 399, 256),(404, 405, 1),(405, 404, 1),(405, 407, 1),(406, 388, 256),(406, 407, 1),(407, 405, 1),(407, 406, 1),(407, 408, 256),(408, 388, 256),(408, 407, 256),(408, 411, 256),(408, 416, 256),(408, 418, 256),(409, 403, 256),(409, 410, 1),(410, 409, 1),(410, 412, 1),(411, 408, 256),(411, 412, 1),(412, 410, 1),(412, 411, 1),(412, 413, 1),(413, 412, 1),(413, 414, 256),(414, 399, 256),(414, 413, 256),(414, 415, 256),(414, 419, 256),(415, 414, 256),(415, 417, 1),(416, 408, 256),(416, 417, 1),(417, 415, 1),(417, 416, 1),(417, 418, 256),(418, 408, 256),(418, 417, 256),(418, 424, 256),(419, 414, 256),(419, 420, 1),(420, 419, 1),(420, 422, 1),(421, 403, 256),(421, 422, 1),(422, 420, 1),(422, 421, 1),(422, 423, 256),(423, 403, 256),(423, 422, 256),(423, 427, 256),(424, 418, 256),(424, 426, 256),(425, 426, 256),(426, 424, 256),(426, 425, 256),(427, 423, 256),(427, 429, 256),(428, 429, 256),(429, 427, 256),(429, 428, 256),(430, 328, 256),(430, 431, 1),(431, 430, 1),(432, 328, 256),(432, 433, 1),(433, 432, 1),(433, 434, 1),(434, 433, 1),(434, 435, 256),(435, 434, 256),(436, 328, 256),(436, 437, 1),(437, 436, 1),(438, 454, 256),(439, 455, 256),(444, 456, 256),(445, 457, 256),(450, 458, 1),(451, 459, 256),(454, 438, 256),(455, 439, 256),(455, 460, 256),(456, 444, 256),(457, 445, 256),(458, 450, 1),(458, 459, 256),(459, 451, 256),(459, 458, 256),(460, 455, 256),(460, 461, 1),(461, 460, 1),(461, 462, 256),(462, 461, 256),(462, 463, 1),(463, 462, 1),(463, 464, 1),(464, 463, 1)]
G.add_weighted_edges_from(elist)
r = nx.degree_assortativity_coefficient(G)
print("assortativity coefficient = %3.3f"%r)
if os.path.isfile("graphs.gpickle"):
	# Load the graphs from a file
	graphs = nx.read_gpickle("graphs.gpickle")

else:
	graphs = {}
# Define a regular expression pattern to match operators
op_pattern = re.compile(r"^.*?\s+(?P<op>[a-z]+)")
# Get the name of the current file
filename = os.path.basename(__file__)

# Print the filename
#print(filename.split("-"))
filell = filename.split("-")[0] + ".ll"
with open(filell, "r") as file:

	lines = file.readlines()

#print(lines)
for node in G.nodes():
	#print(node)
	#print(lines[node])
	match = op_pattern.match(lines[node])
	if match:
		operator = match.group("op")
		#print(operator)
		G.nodes[node]["operation"] = operator
graphs[filename.split("-")[0]] = G
nx.write_gpickle(graphs, "graphs.gpickle")
