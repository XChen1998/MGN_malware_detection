  %32 = load i64, i64* %need_bytes, align 8
  store i64 %32, i64* %3, align 8
  %33 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %2, align 8
  %34 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %33, i32 0, i32 4
  %35 = load i64, i64* %3, align 8
  call void @ssh_buffer_append_space(%struct.SshBuffer* %34, i8** %newdata, i64 %35)
  store i64 1024, i64* %3, align 8
  %38 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %2, align 8
  %39 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %38, i32 0, i32 4
  %40 = load i64, i64* %3, align 8
  call void @ssh_buffer_append_space(%struct.SshBuffer* %39, i8** %newdata, i64 %40)
  %1 = alloca %struct.SshFileBuffer*, align 8
  %2 = alloca %struct._IO_FILE*, align 8
  store %struct.SshFileBuffer* %buf, %struct.SshFileBuffer** %1, align 8
  store %struct._IO_FILE* %f, %struct._IO_FILE** %2, align 8
  %3 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %1, align 8
  call void @ssh_file_buffer_detach(%struct.SshFileBuffer* %3)
  %6 = load %struct._IO_FILE*, %struct._IO_FILE** %2, align 8
  %7 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %1, align 8
  %8 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %7, i32 0, i32 0
  store %struct._IO_FILE* %6, %struct._IO_FILE** %8, align 8
  %9 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %1, align 8
  %10 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %9, i32 0, i32 1
  store i32 1, i32* %10, align 8
  store i32 0, i32* %1, align 4
  %25 = load i64, i64* %3, align 8
  %26 = load i64, i64* %len, align 8
  %27 = sub i64 %25, %26
  store i64 %27, i64* %need_bytes, align 8
  %28 = load i64, i64* %need_bytes, align 8
  %29 = icmp ugt i64 %28, 1024
  %43 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %2, align 8
  %44 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %43, i32 0, i32 2
  %45 = load i64 (i8*, i64, i8*)*, i64 (i8*, i64, i8*)** %44, align 8
  %46 = icmp eq i64 (i8*, i64, i8*)* %45, null
  %14 = phi i1 [ true, %0 ], [ %12, %7 ]
  %15 = select i1 %14, i32 1, i32 0
  %1 = alloca %struct.SshFileBuffer*, align 8
  store %struct.SshFileBuffer* %buf, %struct.SshFileBuffer** %1, align 8
  %2 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %1, align 8
  call void @ssh_file_buffer_detach(%struct.SshFileBuffer* %2)
  %24 = load i32, i32* %1, align 4
  %r = alloca %struct.SshFileBuffer*, align 8
  %1 = call i8* @ssh_xmalloc(i64 72)
  %4 = bitcast i8* %2 to %struct.SshFileBuffer*
  store %struct.SshFileBuffer* %4, %struct.SshFileBuffer** %r, align 8
  %5 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %r, align 8
  call void @ssh_file_buffer_init(%struct.SshFileBuffer* %5)
  %8 = load %struct.SshFileBuffer*, %struct.SshFileBuffer** %1, align 8
  %9 = getelementptr inbounds %struct.SshFileBuffer, %struct.SshFileBuffer* %8, i32 0, i32 2
  %10 = load i64 (i8*, i64, i8*)*, i64 (i8*, i64, i8*)** %9, align 8
  %11 = icmp ne i64 (i8*, i64, i8*)* %10, null
  store i64 %59, i64* %len, align 8
