#include <stdio.h>
#include <iostream>
#include <Windows.h>

#pragma comment(lib, "ws2_32.lib")

using namespace std;

char* GetIP();

int main()
{
	SetPriorityClass(GetCurrentProcess(), HIGH_PRIORITY_CLASS);
	char* ip = GetIP();

	cout << ip << "\n";

	system("PAUSE");
	return 0;
}

char* GetIP()
{
	WSAData wsaData;
	WSAStartup(MAKEWORD(2, 2), &wsaData);
	HOSTENT* Host;
	char hostname[128] = { 0 };
	char* IPv4 = new char[128];
	gethostname(hostname, 128);
	Host = gethostbyname(hostname);
	IPv4 = inet_ntoa(*(in_addr*)Host->h_addr_list[0]);
	WSACleanup();
	return IPv4;
}
