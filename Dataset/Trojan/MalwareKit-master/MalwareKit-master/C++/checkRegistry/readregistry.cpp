#include <windows.h>
#include <malloc.h>
#include <stdio.h>

HKEY hKey;
DWORD buffer;
LONG result;
unsigned long type=REG_DWORD, size=1024;

bool doesRegistryExist(const char* registry){

	result = RegOpenKeyEx(HKEY_CURRENT_USER,registry,0,KEY_READ,&hKey);
	if(result == ERROR_SUCCESS)
	{
	   	RegQueryValueEx(hKey,"Hidden",NULL,&type,(LPBYTE)&buffer,&size);
	   	RegCloseKey(hKey);
       	printf("The value is :%d\n",buffer);
       	return true;
	}else{
		return false;
	}
}

int main()
{
	if(doesRegistryExist("Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced")){
		printf("Registry exists");
	}else{
		printf("Registry does not exist");
	}

	return 0;
}
